<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kampanya YÃ¶netimi - Admin Panel</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .campaign-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .campaign-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .campaign-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid #ddd;
        }

        .tab-button {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .campaign-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .campaign-card-header {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .campaign-card-body {
            padding: 20px;
        }

        .campaign-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-draft {
            background: #fff3cd;
            color: #856404;
        }

        .status-paused {
            background: #f8d7da;
            color: #721c24;
        }

        .campaign-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #666;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .segment-criteria {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
        }

        .criteria-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .criteria-item:last-child {
            border-bottom: none;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .campaign-actions {
            display: flex;
            gap: 10px;
        }

        .campaign-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .detail-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
        }

        .detail-label {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .detail-value {
            color: #666;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .campaign-details {
                grid-template-columns: 1fr;
            }
            
            .campaign-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="campaign-container">
            <div class="campaign-header">
                <h1>ðŸŽª Kampanya YÃ¶netimi</h1>
                <div class="campaign-actions">
                    <button class="btn btn-primary" onclick="openCreateCampaignModal()">
                        + Yeni Kampanya
                    </button>
                    <button class="btn btn-success" onclick="createWeeklyFlashDeal()" style="margin-left: 8px;">
                        âš¡ HaftalÄ±k Flash Ä°ndirim
                    </button>
                </div>
            </div>

            <!-- Metrics Dashboard -->
            <div class="campaign-metrics">
                <div class="metric-card">
                    <div class="metric-value" id="totalCampaigns">0</div>
                    <div class="metric-label">Toplam Kampanya</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="activeCampaigns">0</div>
                    <div class="metric-label">Aktif Kampanya</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalSegments">0</div>
                    <div class="metric-label">MÃ¼ÅŸteri Segmenti</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalUsage">0</div>
                    <div class="metric-label">Toplam KullanÄ±m</div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="campaign-tabs">
                <button class="tab-button active" onclick="showTab('campaigns')">Kampanyalar</button>
                <button class="tab-button" onclick="showTab('segments')">MÃ¼ÅŸteri Segmentleri</button>
                <button class="tab-button" onclick="showTab('analytics')">Analitik</button>
                <button class="tab-button" onclick="showTab('recommendations')">Ã–neriler</button>
            </div>

            <!-- Campaigns Tab -->
            <div id="campaigns" class="tab-content active">
                <div id="campaignsList">
                    <div class="loading">Kampanyalar yÃ¼kleniyor...</div>
                </div>
            </div>

            <!-- Segments Tab -->
            <div id="segments" class="tab-content">
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="openCreateSegmentModal()">
                        + Yeni Segment
                    </button>
                    <button class="btn btn-secondary" onclick="createAutomaticSegments()">
                        ðŸ¤– Otomatik Segmentler OluÅŸtur
                    </button>
                </div>
                <div id="segmentsList">
                    <div class="loading">Segmentler yÃ¼kleniyor...</div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="loading">Analitik veriler yÃ¼kleniyor...</div>
            </div>

            <!-- Recommendations Tab -->
            <div id="recommendations" class="tab-content">
                <div class="loading">Ã–neri sistemi yÃ¼kleniyor...</div>
            </div>
        </div>
    </div>

    <!-- Create Campaign Modal -->
    <div id="createCampaignModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni Kampanya OluÅŸtur</h2>
                <span class="close" onclick="closeModal('createCampaignModal')">&times;</span>
            </div>
            <form id="createCampaignForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="campaignName">Kampanya AdÄ± *</label>
                        <input type="text" id="campaignName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="campaignType">Kampanya TÃ¼rÃ¼ *</label>
                        <select id="campaignType" name="type" required>
                            <option value="discount">Ä°ndirim</option>
                            <option value="free_shipping">Ãœcretsiz Kargo</option>
                            <option value="bundle">Paket KampanyasÄ±</option>
                            <option value="loyalty">Sadakat ProgramÄ±</option>
                            <option value="seasonal">Mevsimsel</option>
                            <option value="birthday">DoÄŸum GÃ¼nÃ¼</option>
                            <option value="abandoned_cart">Terk Edilen Sepet</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="campaignDescription">AÃ§Ä±klama</label>
                    <textarea id="campaignDescription" name="description" rows="3"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="targetSegment">Hedef Segment</label>
                        <select id="targetSegment" name="targetSegmentId">
                            <option value="">TÃ¼m MÃ¼ÅŸteriler</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="discountType">Ä°ndirim TÃ¼rÃ¼</label>
                        <select id="discountType" name="discountType">
                            <option value="percentage">YÃ¼zde</option>
                            <option value="fixed">Sabit Tutar</option>
                            <option value="buy_x_get_y">Al X Ã–de Y</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="discountValue">Ä°ndirim DeÄŸeri</label>
                        <input type="number" id="discountValue" name="discountValue" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="minOrderAmount">Minimum SipariÅŸ TutarÄ±</label>
                        <input type="number" id="minOrderAmount" name="minOrderAmount" step="0.01" min="0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="startDate">BaÅŸlangÄ±Ã§ Tarihi</label>
                        <input type="datetime-local" id="startDate" name="startDate">
                    </div>
                    <div class="form-group">
                        <label for="endDate">BitiÅŸ Tarihi</label>
                        <input type="datetime-local" id="endDate" name="endDate">
                    </div>
                </div>

                <div class="form-group">
                    <label for="usageLimit">KullanÄ±m Limiti</label>
                    <input type="number" id="usageLimit" name="usageLimit" min="1">
                </div>

                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('createCampaignModal')">
                        Ä°ptal
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Kampanya OluÅŸtur
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Segment Modal -->
    <div id="createSegmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni MÃ¼ÅŸteri Segmenti OluÅŸtur</h2>
                <span class="close" onclick="closeModal('createSegmentModal')">&times;</span>
            </div>
            <form id="createSegmentForm">
                <div class="form-group">
                    <label for="segmentName">Segment AdÄ± *</label>
                    <input type="text" id="segmentName" name="name" required>
                </div>

                <div class="form-group">
                    <label for="segmentDescription">AÃ§Ä±klama</label>
                    <textarea id="segmentDescription" name="description" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Segment Kriterleri</label>
                    <div class="segment-criteria">
                        <div class="criteria-item">
                            <span>Minimum SipariÅŸ SayÄ±sÄ±</span>
                            <input type="number" name="minOrders" min="0" style="width: 100px;">
                        </div>
                        <div class="criteria-item">
                            <span>Maksimum SipariÅŸ SayÄ±sÄ±</span>
                            <input type="number" name="maxOrders" min="0" style="width: 100px;">
                        </div>
                        <div class="criteria-item">
                            <span>Minimum Harcama (TL)</span>
                            <input type="number" name="minSpent" min="0" step="0.01" style="width: 100px;">
                        </div>
                        <div class="criteria-item">
                            <span>Maksimum Harcama (TL)</span>
                            <input type="number" name="maxSpent" min="0" step="0.01" style="width: 100px;">
                        </div>
                        <div class="criteria-item">
                            <span>Son SipariÅŸ (GÃ¼n)</span>
                            <input type="number" name="lastOrderDays" min="0" style="width: 100px;">
                        </div>
                    </div>
                </div>

                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('createSegmentModal')">
                        Ä°ptal
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Segment OluÅŸtur
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Global variables
        let campaigns = [];
        let segments = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadCampaigns();
            loadSegments();
            loadMetrics();
        });

        // Tab functionality
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Load tab content
            if (tabName === 'campaigns') {
                loadCampaigns();
            } else if (tabName === 'segments') {
                loadSegments();
            } else if (tabName === 'analytics') {
                loadAnalytics();
            } else if (tabName === 'recommendations') {
                loadRecommendations();
            }
        }

        // Load campaigns
        async function loadCampaigns() {
            try {
                const response = await fetch('/api/campaigns', {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('adminToken')}`
                    }
                });
                const data = await response.json();
                
                if (data.success) {
                    campaigns = data.data;
                    displayCampaigns(campaigns);
                } else {
                    showError('Kampanyalar yÃ¼klenemedi: ' + data.message);
                }
            } catch (error) {
                console.error('Error loading campaigns:', error);
                showError('Kampanyalar yÃ¼klenirken hata oluÅŸtu');
            }
        }

        // Display campaigns
        function displayCampaigns(campaigns) {
            const container = document.getElementById('campaignsList');
            
            if (campaigns.length === 0) {
                container.innerHTML = '<div class="loading">HenÃ¼z kampanya bulunmuyor</div>';
                return;
            }

            container.innerHTML = campaigns.map(campaign => `
                <div class="campaign-card">
                    <div class="campaign-card-header">
                        <div>
                            <h3>${campaign.name}</h3>
                            <span class="campaign-status status-${campaign.status}">${getStatusText(campaign.status)}</span>
                        </div>
                        <div class="campaign-actions">
                            <button class="btn btn-primary" onclick="viewCampaign(${campaign.id})">GÃ¶rÃ¼ntÃ¼le</button>
                            <button class="btn btn-warning" onclick="editCampaign(${campaign.id})">DÃ¼zenle</button>
                            <button class="btn btn-danger" onclick="deleteCampaign(${campaign.id})">Sil</button>
                        </div>
                    </div>
                    <div class="campaign-card-body">
                        <div class="campaign-details">
                            <div class="detail-group">
                                <div class="detail-label">TÃ¼r</div>
                                <div class="detail-value">${getTypeText(campaign.type)}</div>
                            </div>
                            <div class="detail-group">
                                <div class="detail-label">Hedef Segment</div>
                                <div class="detail-value">${campaign.segmentName || 'TÃ¼m MÃ¼ÅŸteriler'}</div>
                            </div>
                            <div class="detail-group">
                                <div class="detail-label">Ä°ndirim</div>
                                <div class="detail-value">${campaign.discountValue}${campaign.discountType === 'percentage' ? '%' : ' TL'}</div>
                            </div>
                            <div class="detail-group">
                                <div class="detail-label">KullanÄ±m</div>
                                <div class="detail-value">${campaign.usedCount}/${campaign.usageLimit || 'âˆž'}</div>
                            </div>
                        </div>
                        ${campaign.description ? `<p style="margin-top: 15px; color: #666;">${campaign.description}</p>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Load segments
        async function loadSegments() {
            try {
                const response = await fetch('/api/campaigns/segments', {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('adminToken')}`
                    }
                });
                const data = await response.json();
                
                if (data.success) {
                    segments = data.data;
                    displaySegments(segments);
                    populateSegmentSelect();
                } else {
                    showError('Segmentler yÃ¼klenemedi: ' + data.message);
                }
            } catch (error) {
                console.error('Error loading segments:', error);
                showError('Segmentler yÃ¼klenirken hata oluÅŸtu');
            }
        }

        // Display segments
        function displaySegments(segments) {
            const container = document.getElementById('segmentsList');
            
            if (segments.length === 0) {
                container.innerHTML = '<div class="loading">HenÃ¼z segment bulunmuyor</div>';
                return;
            }

            container.innerHTML = segments.map(segment => `
                <div class="campaign-card">
                    <div class="campaign-card-header">
                        <div>
                            <h3>${segment.name}</h3>
                            <span class="campaign-status ${segment.isActive ? 'status-active' : 'status-paused'}">
                                ${segment.isActive ? 'Aktif' : 'Pasif'}
                            </span>
                        </div>
                        <div class="campaign-actions">
                            <button class="btn btn-primary" onclick="viewSegment(${segment.id})">GÃ¶rÃ¼ntÃ¼le</button>
                            <button class="btn btn-warning" onclick="editSegment(${segment.id})">DÃ¼zenle</button>
                            <button class="btn btn-danger" onclick="deleteSegment(${segment.id})">Sil</button>
                        </div>
                    </div>
                    <div class="campaign-card-body">
                        <p>${segment.description || 'AÃ§Ä±klama bulunmuyor'}</p>
                        <div class="segment-criteria">
                            <h4>Kriterler:</h4>
                            ${Object.entries(segment.criteria).map(([key, value]) => 
                                `<div class="criteria-item">
                                    <span>${getCriteriaLabel(key)}</span>
                                    <span>${value}</span>
                                </div>`
                            ).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load metrics
        async function loadMetrics() {
            try {
                // This would load actual metrics from the API
                document.getElementById('totalCampaigns').textContent = campaigns.length;
                document.getElementById('activeCampaigns').textContent = campaigns.filter(c => c.status === 'active').length;
                document.getElementById('totalSegments').textContent = segments.length;
                document.getElementById('totalUsage').textContent = campaigns.reduce((sum, c) => sum + c.usedCount, 0);
            } catch (error) {
                console.error('Error loading metrics:', error);
            }
        }

        // Modal functions
        function openCreateCampaignModal() {
            document.getElementById('createCampaignModal').style.display = 'block';
        }

        function openCreateSegmentModal() {
            document.getElementById('createSegmentModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Populate segment select
        function populateSegmentSelect() {
            const select = document.getElementById('targetSegment');
            select.innerHTML = '<option value="">TÃ¼m MÃ¼ÅŸteriler</option>';
            segments.forEach(segment => {
                const option = document.createElement('option');
                option.value = segment.id;
                option.textContent = segment.name;
                select.appendChild(option);
            });
        }

        // Create campaign
        document.getElementById('createCampaignForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const campaignData = Object.fromEntries(formData.entries());
            
            try {
                const response = await fetch('/api/campaigns', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('adminToken')}`
                    },
                    body: JSON.stringify(campaignData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess('Kampanya baÅŸarÄ±yla oluÅŸturuldu');
                    closeModal('createCampaignModal');
                    loadCampaigns();
                    loadMetrics();
                } else {
                    showError('Kampanya oluÅŸturulamadÄ±: ' + data.message);
                }
            } catch (error) {
                console.error('Error creating campaign:', error);
                showError('Kampanya oluÅŸturulurken hata oluÅŸtu');
            }
        });

        // Create segment
        document.getElementById('createSegmentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const segmentData = {
                name: formData.get('name'),
                description: formData.get('description'),
                criteria: {
                    minOrders: formData.get('minOrders') ? parseInt(formData.get('minOrders')) : undefined,
                    maxOrders: formData.get('maxOrders') ? parseInt(formData.get('maxOrders')) : undefined,
                    minSpent: formData.get('minSpent') ? parseFloat(formData.get('minSpent')) : undefined,
                    maxSpent: formData.get('maxSpent') ? parseFloat(formData.get('maxSpent')) : undefined,
                    lastOrderDays: formData.get('lastOrderDays') ? parseInt(formData.get('lastOrderDays')) : undefined
                }
            };
            
            // Remove undefined values
            Object.keys(segmentData.criteria).forEach(key => {
                if (segmentData.criteria[key] === undefined) {
                    delete segmentData.criteria[key];
                }
            });
            
            try {
                const response = await fetch('/api/campaigns/segments', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('adminToken')}`
                    },
                    body: JSON.stringify(segmentData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess('Segment baÅŸarÄ±yla oluÅŸturuldu');
                    closeModal('createSegmentModal');
                    loadSegments();
                    loadMetrics();
                } else {
                    showError('Segment oluÅŸturulamadÄ±: ' + data.message);
                }
            } catch (error) {
                console.error('Error creating segment:', error);
                showError('Segment oluÅŸturulurken hata oluÅŸtu');
            }
        });

        // Create automatic segments
        async function createAutomaticSegments() {
            try {
                const response = await fetch('/api/campaigns/segments/auto-create', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('adminToken')}`
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess(data.message);
                    loadSegments();
                    loadMetrics();
                } else {
                    showError('Otomatik segmentler oluÅŸturulamadÄ±: ' + data.message);
                }
            } catch (error) {
                console.error('Error creating automatic segments:', error);
                showError('Otomatik segmentler oluÅŸturulurken hata oluÅŸtu');
            }
        }

        // Helper functions
        function getStatusText(status) {
            const statusMap = {
                'draft': 'Taslak',
                'active': 'Aktif',
                'paused': 'DuraklatÄ±ldÄ±',
                'completed': 'TamamlandÄ±',
                'cancelled': 'Ä°ptal Edildi'
            };
            return statusMap[status] || status;
        }

        function getTypeText(type) {
            const typeMap = {
                'discount': 'Ä°ndirim',
                'free_shipping': 'Ãœcretsiz Kargo',
                'bundle': 'Paket KampanyasÄ±',
                'loyalty': 'Sadakat ProgramÄ±',
                'seasonal': 'Mevsimsel',
                'birthday': 'DoÄŸum GÃ¼nÃ¼',
                'abandoned_cart': 'Terk Edilen Sepet'
            };
            return typeMap[type] || type;
        }

        function getCriteriaLabel(key) {
            const labelMap = {
                'minOrders': 'Minimum SipariÅŸ',
                'maxOrders': 'Maksimum SipariÅŸ',
                'minSpent': 'Minimum Harcama',
                'maxSpent': 'Maksimum Harcama',
                'lastOrderDays': 'Son SipariÅŸ (GÃ¼n)',
                'rfmScore': 'RFM Skoru'
            };
            return labelMap[key] || key;
        }

        function showError(message) {
            const container = document.querySelector('.campaign-container');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            container.insertBefore(errorDiv, container.firstChild);
            setTimeout(() => errorDiv.remove(), 5000);
        }

        function showSuccess(message) {
            const container = document.querySelector('.campaign-container');
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            container.insertBefore(successDiv, container.firstChild);
            setTimeout(() => successDiv.remove(), 5000);
        }

        // Placeholder functions for future implementation
        function viewCampaign(id) {
            console.log('View campaign:', id);
        }

        function editCampaign(id) {
            console.log('Edit campaign:', id);
        }

        function deleteCampaign(id) {
            if (confirm('Bu kampanyayÄ± silmek istediÄŸinizden emin misiniz?')) {
                console.log('Delete campaign:', id);
            }
        }

        function viewSegment(id) {
            console.log('View segment:', id);
        }

        function editSegment(id) {
            console.log('Edit segment:', id);
        }

        function deleteSegment(id) {
            if (confirm('Bu segmenti silmek istediÄŸinizden emin misiniz?')) {
                console.log('Delete segment:', id);
            }
        }

        function loadAnalytics() {
            document.getElementById('analytics').innerHTML = '<div class="loading">Analitik veriler yÃ¼kleniyor...</div>';
        }

        function loadRecommendations() {
            document.getElementById('recommendations').innerHTML = '<div class="loading">Ã–neri sistemi yÃ¼kleniyor...</div>';
        }
    </script>
</body>
</html>
